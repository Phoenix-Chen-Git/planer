{
  "permissions": {
    "allow": [
      "Bash(python3 -c \"from lib.storage import Storage; s = Storage\\(\\); print\\(''Storage initialized successfully''\\); print\\(f''Data directory: {s.data_dir}''\\)\")",
      "Bash(python3 -c \"from lib.config_loader import load_config; config = load_config\\(\\); prefs = config.get_preferences\\(\\); print\\(''âœ“ Config loaded successfully''\\); print\\(f''Upcoming days setting: {prefs.get\\(\"\"upcoming_days\"\", \"\"not found\"\"\\)}''\\)\")",
      "Bash(python3 -c \"from lib.storage import Storage; from datetime import datetime, timedelta; s = Storage\\(\\); upcoming = s.get_upcoming_tasks\\(days=7\\); print\\(f''âœ“ get_upcoming_tasks\\(\\) works''\\); print\\(f''Found {len\\(upcoming\\)} upcoming tasks''\\)\")",
      "Bash(python3 -c \"\nfrom lib.storage import Storage\nfrom datetime import datetime, timedelta\n\n# Create a test future task\ns = Storage\\(\\)\ntomorrow = datetime.now\\(\\) + timedelta\\(days=1\\)\n\nplan_data = {\n    ''date'': tomorrow.isoformat\\(\\),\n    ''jobs'': [{\n        ''name'': ''Test Job'',\n        ''description'': ''Test description'',\n        ''user_input'': ''Test future task'',\n        ''sub_jobs'': [],\n        ''chat_notes'': []\n    }],\n    ''plan_content'': ''# Test Plan\\\\n\\\\n## Test Job\\\\n- [ ] Test future task\\\\n\\\\n'',\n    ''refinement_history'': [],\n    ''completion_status'': {}\n}\n\n# Save the plan\nimport json\nplan_path = s.get_plan_path\\(tomorrow\\)\nwith open\\(plan_path, ''w'', encoding=''utf-8''\\) as f:\n    json.dump\\(plan_data, f, indent=2, ensure_ascii=False\\)\n\nprint\\(f''âœ“ Created test future task for {tomorrow.strftime\\(\"\"%Y-%m-%d\"\"\\)}''\\)\n\n# Test get_upcoming_tasks\nupcoming = s.get_upcoming_tasks\\(days=7\\)\nprint\\(f''âœ“ Found {len\\(upcoming\\)} upcoming task\\(s\\)''\\)\nif upcoming:\n    for task in upcoming:\n        print\\(f''  - {task[\"\"job_name\"\"]}: {task[\"\"task_description\"\"]} on {task[\"\"date_str\"\"]}''\\)\n\")",
      "Bash(python3 -c \"\nimport sys\nsys.path.insert\\(0, ''/Users/shuaiyu_chen/Desktop/daily_tools/Plan_and_log''\\)\n\nfrom lib.storage import Storage\nfrom lib.config_loader import load_config\nfrom rich.console import Console\nfrom datetime import datetime\n\n# Test display_upcoming_tasks function\nconsole = Console\\(\\)\nstorage = Storage\\(\\)\nconfig = load_config\\(\\)\n\n# Import the function\nfrom daily import display_upcoming_tasks\n\nprint\\(''Testing display_upcoming_tasks function:''\\)\nprint\\(''='' * 50\\)\ndisplay_upcoming_tasks\\(storage, console, config\\)\nprint\\(''='' * 50\\)\nprint\\(''âœ“ display_upcoming_tasks\\(\\) works correctly''\\)\n\")",
      "Bash(git add config.yaml daily.py hierarchy.py lib/config_loader.py lib/storage.py plan.py summarize.py calendar_view.py)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nImplement three major improvements to Daily Planner\n\n1. **Absolute Data Paths**: Tool now works from any directory\n   - Data stored in ~/.daily_planner/data/\n   - Config stored in ~/.daily_planner/config.yaml\n   - Automatic migration from project directory on first run\n   - Modified: lib/storage.py, lib/config_loader.py, hierarchy.py, calendar_view.py\n\n2. **Remove Repetitive Chat Prompts**: Streamlined workflow\n   - Removed \"Chat with DeepSeek about 'XXX'?\" after each task\n   - Removed from both plan.py and summarize.py\n   - Kept final free chat session in summarize.py \\(for whole day reflection\\)\n\n3. **Future Tasks Display**: Plan ahead with upcoming tasks\n   - New \"ðŸ“ Add future task\" menu option in daily.py\n   - Display upcoming tasks panel on dashboard \\(next 7 days by default\\)\n   - Configurable via config.yaml \\(upcoming_days preference\\)\n   - New method: Storage.get_upcoming_tasks\\(\\)\n\nAll features tested and working correctly.\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n\\)\")"
    ]
  }
}
